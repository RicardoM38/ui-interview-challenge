google.maps.__gjsload__('visualization_impl', function(_){var N$=function(){if(null!=M$)return M$;var a=document.createElement("canvas");return M$=!(!a.getContext||!a.getContext("2d"))},O$=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;c=Array(a);for(var d=0;d<a;++d)c[d]=b.concat();return c},Wha=function(a){if(!a||!a.getLength())return 1;var b=new _.Xd;a.forEach(function(l){l&&b.extend(l.location?l.location:l)});var c=b.Ya.i,d=b.Ua.i,e=Math.max(b.Ya.j-c,b.Ua.j-d);if(1E-9>e){var f=0;a.forEach(function(l){l instanceof _.J?++f:f+=l.weight});return Math.max(1,
f)}var g=800/e,h=O$(800),k=1;a.forEach(function(l){if(l){var m=l.location?l.location:l;l=l.weight||1;m=new _.I(Math.max(0,Math.min(799,Math.floor((m.lat()-c)*g))),Math.max(0,Math.min(799,Math.floor((m.lng()-d)*g))));h[m.x][m.y]+=l;k=Math.max(k,h[m.x][m.y])}});return k},Yha=function(a,b){var c=[],d=[],e=1E3/(a.length-1);_.B(a,function(h,k){c.push(k*e);d.push(_.OK(h))});a=Array(1001);for(var f=0,g=0;1001>g;++g)g>c[f+1]&&++f,a[g]=f<c.length-1?Xha(e*f,g,e*(f+1),d[f],d[f+1]):d[d.length-1],a[g].alpha*=
b,a[g].alpha=_.Xc(Math.floor(255*a[g].alpha),0,255);return a},Xha=function(a,b,c,d,e){if(a==c)return d;a=(b-a)/(c-a);return new _.LK(Math.floor((e.o-d.o)*a+d.o),Math.floor((e.j-d.j)*a+d.j),Math.floor((e.i-d.i)*a+d.i),(e.alpha-d.alpha)*a+d.alpha)},P$=function(a,b){this.H=a;this.j=b;this.i=1;this.o=[]},Q$=function(a,b,c){_.ko(b.Na,"");if(N$()){var d=b.ownerDocument,e,f=e=d.createElement("canvas");_.qo(f);f.width=f.height=256;f=f.getContext("2d");var g=1<a.i;b.Na.appendChild(e);b=Zha(a,b);e=a.o;for(var h=
Math.floor(e.length/2),k=b.length,l=k-h,m=O$(k),q=0;q<k;++q)for(var r=b[q],u=m[q],v=0;v<k;++v){var x=r[v];if(x)for(var y=v-h,F=Math.min(l,v+h+1),K=Math.max(h,y);K<F;++K)u[K]+=x*e[K-y]}b=O$(k-2*h);for(q=0;q<k;++q)for(r=m[q],u=Math.max(h,q-h),v=Math.min(l,q+h+1),x=q-h,y=h,F=0;y<l;++y,++F)if(K=r[y])for(var N=u;N<v;++N)b[N-h][F]+=K*e[N-x];e=Math.ceil(256/a.i);e=f.createImageData(e,e);h=a.get("gradient");k=h[h.length-1];c=h.length/c;l=e.data;q=m=0;for(r=b.length;q<r;++q)for(u=b[q],v=0,x=u.length;v<x;++v)(y=
u[v])||h[0].alpha?(y=h[Math.floor(y*c)]||k,l[m++]=y.o,l[m++]=y.j,l[m++]=y.i,l[m++]=y.alpha):m+=4;g?(d=d.createElement("canvas"),d.width=d.height=256/a.i,d.getContext("2d").putImageData(e,0,0),f.scale(a.i,a.i),f.drawImage(d,0,0)):f.putImageData(e,0,0)}},Zha=function(a,b){var c=a.get("projection");c=_.rn(c);var d=a.get("radius");d=Math.round(d/a.i)*a.i;var e=b.ad,f=(256+2*d)/a.i,g=O$(f),h;for(h in e){var k=e[h],l=c.fromLatLngToPoint(new _.J(k.Ja,k.Ia,!0)),m=c.fromLatLngToPoint(new _.J(k.Pa,k.Oa,!0)),
q=null;q=_.Cm(a.j,new _.Ad(l.x,l.y),b.zoom,_.na());m=_.Cm(a.j,new _.Ad(m.x,m.y),b.zoom,_.na());l=d/256;q=_.Bm(a.j,{Aa:Math.min(q.Aa,m.Aa)+l,Ba:Math.min(q.Ba,m.Ba)+l,La:b.zoom});q=new _.I(q.Da,q.Ha);k=a.H.search(k);m=0;for(l=k.length;m<l;++m){var r=k[m],u=c.fromLatLngToPoint(new _.J(r.Za.x,r.Za.y)),v=0,x=0;u=_.Tx(a.j,new _.Ad(u.x,u.y),new _.Ad(q.x,q.y),b.zoom);v=Math.floor(256*u.Aa);x=Math.floor(256*u.Ba);u=Math.floor((x+d)/a.i);v=Math.floor((v+d)/a.i);0<=u&&u<f&&0<=v&&v<f&&(g[u][v]+=r.weight)}}return g},
U$=function(a,b){b=void 0===b?_.ll:b;var c=this;this.T=b;this.ka=new _.yd(256,256);this.i={};b=_.Hd(-100,-300,100,300);this.W=new _.tF(b,void 0);b=_.Hd(-90,-180,90,180);this.o=_.JK(b,function(d,e){return d.Za.equals(e.Za)&&d.weight==e.weight});this.wa=[];this.$=new _.Ve;this.j=0;this.H=new P$(this.o,this.T);this.H.bindTo("projection",this,"projection",!0);this.H.bindTo("gradient",this,"gradient",!0);this.H.bindTo("radius",this,"radius",!0);a(this.$,function(d){return Q$(c.H,d,c.j)});this.ua=new _.rq(function(){var d=
c.j;c.j=R$(c);_.Zc(d,c.j)||S$(c)},0);this.addListener("data_changed",function(){return $ha(c)});this.addListener("maxintensity_changed",function(){c.j=R$(c);S$(c)});this.addListener("gradient_changed",function(){S$(c)});this.addListener("opacity_changed",function(){var d=c.get("opacity"),e;for(e in c.i)c.i.hasOwnProperty(e)&&_.bz(c.i[e].Na,d)});this.addListener("radius_changed",function(){for(var d in c.i)if(c.i.hasOwnProperty(d)){var e=c.i[d],f=void 0,g=e.ad;for(f in g)g.hasOwnProperty(f)&&c.W.remove(g[f]);
e.ad={};T$(c,e)}S$(c)});this.triggersTileLoadEvent=!0},T$=function(a,b){var c={Aa:b.Wa.x,Ba:b.Wa.y,La:b.zoom},d=a.get("radius"),e=_.rn(a.get("projection")),f=_.Bm(a.T,c);f=new _.I(f.Da,f.Ha);d=_.Sx(a.T,c,d/256);c=d.min;d=d.max;c=_.Hd(c.Da,c.Ha,d.Da,d.Ha);_.KK(c,e,f,function(g){g.i=b;b.ad[_.me(g)]=g;_.uF(a.W,g)})},R$=function(a){var b=a.get("maxIntensity");return 1<=b?b:Wha(a.get("data"))},$ha=function(a){a.o.clear();var b=a.get("data");b&&(b.forEach(function(e){e&&_.IK(a.o,V$(e))}),a.ua.Mb());S$(a);
for(var c=_.Da(a.wa),d=c.next();!d.done;d=c.next())_.L.removeListener(d.value);a.wa=b?[b.addListener("insert_at",function(e){return W$(a,e)}),b.addListener("remove_at",function(e,f){return X$(a,f)}),b.addListener("set_at",function(e,f){X$(a,f);W$(a,e)})]:[]},W$=function(a,b){if(b=a.get("data").getAt(b))b=V$(b),_.IK(a.o,b),a.ua.Mb(),Y$(a,b.Za)},X$=function(a,b){b&&(b=V$(b),a.o.remove(b),a.ua.Mb(),Y$(a,b.Za))},Y$=function(a,b){b=_.wF(a.W,b);b=_.Da(b);for(var c=b.next();!c.done;c=b.next())_.We(a.$,c.value.i)},
S$=function(a){for(var b in a.i)a.i.hasOwnProperty(b)&&_.We(a.$,a.i[b])},V$=function(a){var b=a.location?a.location:a;a=a.weight||1;return{Za:new _.I(b.lat(),b.lng()),weight:a}},Z$=function(a,b){var c=new _.aE(_.cE(250));this.i=a;a.i=(0,_.w)(this.o,this);this.T=b;this.j=c},$$=_.n(),M$,aia="rgba(102, 255, 0, 0);rgba(102, 255, 0, 1);rgba(147, 255, 0, 1);rgba(193, 255, 0, 1);rgba(238, 255, 0, 1);rgba(244, 227, 0, 1);rgba(249, 198, 0, 1);rgba(255, 170, 0, 1);rgba(255, 113, 0, 1);rgba(255, 57, 0, 1);rgba(255, 0, 0, 1)".split(";");_.A(P$,_.M);P$.prototype.radius_changed=function(){var a=this.get("radius");N$()?this.i=20>a?1:2:this.i=4;a=Math.round(a/this.i);for(var b=a/3,c=[],d=-a;d<=a;d++)c.push(Math.exp(-d*d/(2*b*b)));this.o=c};_.Ha(U$,_.Ti);U$.prototype.Nb=function(){return{tileSize:{ya:this.ka.width,Ca:this.ka.height},Va:this.T,Ub:2,Yb:this.Qa.bind(this)}};
U$.prototype.Qa=function(a,b){var c=this,d=(void 0===b?{}:b).Kb,e=document.createElement("div");_.Tg(e,this.ka);b=this.get("opacity");void 0!==b&&_.bz(e,b);var f={Na:e,zoom:a.La,Wa:new _.I(a.Aa,a.Ba),ad:{},ownerDocument:document};e.wb=f;this.i[_.me(f)]=f;T$(this,f);this.j||(this.j=R$(this));Q$(this.H,f,this.j);var g=!1;a=Promise.resolve();a.then(function(){g=!0});return{Fb:function(){return e},nc:function(){return g},loaded:a,release:function(){_.ko(e,"");delete c.i[_.me(f)];d&&d()}}};
U$.prototype.releaseTile=function(a){if(a){var b=a.wb;a.wb=null;delete this.i[_.me(b)];a=this.W;for(var c in b.ad)b.ad.hasOwnProperty(c)&&a.remove(b.ad[c]);_.ko(b.Na,"")}};Z$.prototype.o=function(){_.bE(this.j,(0,_.w)(this.H,this))};Z$.prototype.H=function(){a:{var a=this.i.j;for(var b in a){a=a[b];this.i.remove(a);break a}a=null}a&&this.T(a)};$$.prototype.i=function(a){var b=a.o,c=a.o=a.get("map");b&&(a.i&&(a.i.unbindAll(),a.i=null),a.j&&(a.j.release(),a.j=null),_.wo("Lh","-p",a));if(c){var d=function(){k&&k.unbindAll();k=new U$(g,h);c&&k.bindTo("projection",c);k.bindTo("data",a);k.bindTo("maxIntensity",a);k.bindTo("gradient",e,"colorGradient");k.bindTo("radius",f,"renderingRadius");a.i&&(k.bindTo("opacity",a.i),e.set("opacity",1))};a.i=new _.St({dissipating:!0,gradient:aia,opacity:.6,radius:10});a.i.bindTo("dissipating",a);a.i.bindTo("gradient",
a);a.i.bindTo("opacity",a);a.i.bindTo("radius",a);var e=new _.wz(["stringGradient","opacity"],"colorGradient",function(q,r){return Yha(q,r)});e.bindTo("stringGradient",a.i,"gradient",!0);var f=new _.wz(["radius","dissipating","zoom"],"renderingRadius",function(q,r,u){return r?q:Math.min(Math.round(q*Math.pow(2,u)),256)});f.bindTo("radius",a.i);f.bindTo("zoom",c);f.bindTo("dissipating",a.i);var g=function(q,r){new Z$(q,r)};b=c.__gm;var h=void 0,k=null;d();var l=k.Nb(),m=_.bf(l);b.i.then(function(q){q.de.hb(function(r){r&&
h!=r.Va&&(h=r.Va,d(),m.set(k.Nb()))})});_.rF(c,m,"overlayLayer",15,{dj:function(q){a.j&&a.j.release();a.j=q}});_.ej(c,"Lh");_.vo("Lh","-p",a)}};_.Df("visualization_impl",new $$);});
